

```
天之道，利而不害；圣人之道，为而不争。
						--<道德经>
```



#### 为什么引入友元

类的机制 实现了隐藏和封装。

对于类的成员函数 成员变量，可以使用`private public protect` 表示其的使用权限。

- public：表明该数据成员、成员函数是对所有用户开放的，所有用户都可以直接进行调用

- private ： 表示私有，私有的意思就是除了class自己之外，任何人都不可以直接使用

- protect： 对于子类就是public的，可以自由使用，没有限制，而对于其他的外部class，protected就变成private

对于此一刀切的方式，有些情况还是不够效率。需求再细分下策略。因此引入友元函数 友元类。



#### 友元函数

 友元函数是可以直接访问类的私有成员的非成员函数。它是定义在类外的普通函数，它不属于任何类，但需要在类的定义中加以声明，声明时只需在友元的名称前加上关键字friend，其格式如下：

```
friend  类型 函数名(形式参数);
```

- 友元函数的声明可以放在类的私有部分，也可以放在公有部分，它们是没有区别的，都说明是该类的一个友元函数
- 一个函数可以是多个类的友元函数，只需要在各个类中分别声明。
- 友元函数的调用与一般函数的调用方式一致。 



#### 友元类

友元类的所有成员函数都是另一个类的友元函数，都可以访问另一个类中的隐藏信息（包括私有成员和保护成员）

当希望一个类可以存取另一个类的私有成员时，可以将该类声明为另一类的友元类。

定义友元类的语句格式如下：

```c++
      class A
      {
             …
      public:
             friend class B;
             …
      };
```

如上：

1. 类B是类A的友元类
2. 类B的所有成员函数都是类A的友元函数，能直接访问A的私有成员和保护成员



#### 友元类的特点

使用友元类时注意：

- 友元关系不能被继承。 
- 友元关系是单向的，不具有交换性。若类B是类A的友元，类A不一定是类B的友元，要看在类中是否有相应的声明
- 友元关系不具有传递性。若类B是类A的友元，类C是B的友元，类C不一定是类A的友元，同样要看类中是否有相应的申明





